{"name":"Node-express-docker","tagline":"NodeJS web application in Docker container","body":"# node-express-docker\r\nThis is a smaple application to demostarte the ability to Run NodeJs applications on Docker Container.\r\n\r\n### Prerequisites\r\n* **NodeJS** - This applicaion is tested with node v5.0.0 and npm v3.4.0. You can follow instructions https://nodejs.org/en/ to install node and npm on your machine.\r\n* **Docker** - This application is tested with docker v1.9.0. You can follow instructions https://nodejs.org/en/ to install Docker on your machine.\r\n\r\n### How to Run/Test?\r\nMake sure that, you have installed Docker on your machine before proceeding.\r\n* Build the Image\r\nNavigate to the project folder and execute below command\r\n```\r\ndocker build -t <your username>/node-express-docker .\r\n```\r\n* Start your Docker image. \r\n```\r\ndocker run -p 49160:3000 -d <your username>/node-express-docker\r\n```\r\n* Verfiy that your image started. You should see your image in runnig mode there.\r\n```\r\ndocker ps\r\n```\r\n* Find the ip-address of the Docker container.\r\n```\r\ndocker-machine ip  <your username>/node-express-docker\r\n```\r\n* Test Node web application on Docker Image\r\nGran the IP address of your container using above command before proceed.\r\nOpen your favorite browser and type the url http://{ip-address}:49160\r\n\r\n**Ti-ta** - Your sample application is now runnnig from Docker container.\r\n\r\nIf you are not seeing the appication running successfully, please read the details below.\r\n***\r\n### Steps In buidling the application and Docker Image\r\n\r\n* **Create a sample application using express generator**\r\nFirst lets create a sample node web applicationa and test that locally. Run below to install **express** and **expres-generator** node packages.\r\n```\r\nnpm install -g express-generator\r\nnpm install -g express\r\n```\r\nOnce we have express and express-genarator installed, we can create our sample application. Move to the directory where you want to create the application and run below command.\r\n```\r\nexpress <application-name>\r\n```\r\nIn my case, I ran **express node-express-docker**\r\n* **Run & test** application - To run the application navigate to the application directory and run below commands.\r\n```\r\nnpm install\r\nnpm start\r\n```\r\nNow, open your favorite browser and type the url http://localhost:3000\r\n\r\n**Note:** If you are getting an issue, go back to the console where we started the application and check the logs.\r\n\r\n* **Create a Docker container based on Ubuntu and install node on that**\r\nNow that we have the application up and runnig, we can start Docker work. Make sure you have installed docker before stating this. Verify that you have Docker by running below command.\r\n```\r\ndocker version\r\n```\r\n**Optional:** In case you are getting a message 'Cannot connect to the Docker daemon. Is the docker daemon running on this host?', you need to set the environment varaibles for Docker by running below. In the comamnd default is the name of environment. You have to change that if you are using a different environment.\r\n```\r\neval \"$(docker-machine env default)\"\r\n```\r\nIn this case, we are going to use latest version on Ubuntu to create an image of our application. Docker needs a file called Dockerfile to build an image.\r\nOpen the Dockerfile that I have in the project and copy the contents to your Docker file. This file contains instruction to get the latest ubuntu image and install node and npm.\r\nAfter this, we have to copy our code to the container and tell Docker to expose the application port. Finally we need to tell Docker the command that it needs to run when we strat this image.\r\nYou can read more about the Dockerfile creation here - http://docs.docker.com/engine/reference/builder/\r\n\r\nOnce you have the Docker file ready, we need to build the image. Run below comamnd to build the image.\r\n```\r\ndocker build -t <your username>/node-express-docker .\r\n```\r\nVerify that the image is ready by running below command. You'll see you image listed there.\r\n```\r\ndocker images\r\n```\r\nStart your Docker image. We are asking to run the image and expose the port 3000 on the container to 49160 on host.\r\nRunning your image with -d runs the container in detached mode, leaving the container running in the background. The -p flag redirects a public port to a private port in the container.\r\n```\r\ndocker run -p 49160:3000 -d <your username>/node-express-docker\r\n```\r\nVerfiy that your image started. You should see your image in runnig mode there.\r\n```\r\ndocker ps\r\n```\r\n**Optional:** If you cannot see your image in the list, you may need to run the application in regualr mode by removing the -d option. This will help you to check for any errors.\r\n```\r\ndocker run -p 49160:3000 <your username>/node-express-docker\r\n```\r\nFind the ip-address of the Docker container.\r\n```\r\ndocker-machine ip  <your username>/node-express-docker\r\n```\r\nNow we are all set to run the application. Open your favorite browser and type the url http://<ip-address>:49160\r\n\r\n***\r\nIf you want to monitor the application you can follow below steps.\r\n* Find the conatiner id by running\r\n```\r\ndocker ps\r\n```\r\n* Get the status by passing container id to below command.\r\n```\r\ndocker stats <container-id>\r\n```\r\n* To stop the container, you can run below command\r\n```\r\ndocker stop <container-id>\r\n```\r\n","google":"UA-72706914-1","note":"Don't delete this file! It's used internally to help with page regeneration."}